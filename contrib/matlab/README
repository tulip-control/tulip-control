MATLAB Export
Stephanie Tsuei, 2014

This folder contains the files required to export controllers to Simulink
blocks and a couple examples for reference. 

Required software (in addition to Tulip):
    - Matlab
    - Simulink
    - Stateflow
    - MPT Toolbox 3.0 (http://people.ee.ethz.ch/~mpt/3/)

Provided files below:

	- Python files: tomatlab.py
    - Matlab files: get_input.m, load_tulip.m, load_continuous.m, cont_to_disc.m



USAGE

1) Run the converter after synthesis:

	import tomatlab
	...
	ctrl = synth.synthesize(...)               # returns a Mealy Machine
	tomatlab.export(ctrl, 'system.mat')        # exports .mat file

2) In MATLAB, make sure that these files are in the MATLAB path:
    - get_input.m
    - load_tulip.m
    - load_continuous.m
    - cont_to_disc.m

3) In MATLAB, define the variables 'matfile' and 'timestep'. Run load_tulip.m. A
   new Simulink model containing the Mealy Machine should appear.


EXAMPLES

1) Discrete Example:

	discrete.py is a modified version of /examples/robot_planning/discrete.py
	that contains a line at the end for generating a Stateflow chart from the
	Mealy Machine "ctrl". After running discrete.py, running the file
    "load_discrete.m" opens up a Simulink model that contains the Tulip Mealy
    Machine, a random park signal generator, and output scopes.

	
2) Continuous Example:

    continuous.py is a modified version of
    /examples/robot_planning/continuous.py. Run load_robot.m after continuous.py
    in order to see a completed Simulink setup.


KNOWN ISSUES

1) Stateflow charts are nearly unreadable.

2) Support for continuous-state controllers is limited. The current
   implementation only supports continuous controllers discretized with the
   following settings:

       use_all_horizon = False
       conservative = False

   In the future, use_all_horizon = True will be supported. Until the MPT
   toolbox supports setting non-Polytopic target sets, we will not support
   conservative discretization.

3) No support for SwitchedSysDyn (yet).
